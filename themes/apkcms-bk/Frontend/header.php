<?php
use App\Models\FastModel;
require_once __DIR__ . '/functions.php';

$current_page = get_current_page();
$page_class = 'page-' . $current_page['page_type'];

$all_categories = get_categories('posts','category');
// Filter categories theo parent ID tá»« options
$GLOBALS['games_categories'] = array_filter($all_categories, function($category) {
    return $category['parent'] == option('themes_gamesid');
});
$GLOBALS['apps_categories'] = array_filter($all_categories, function($category) {
    return $category['parent'] == option('themes_appsid');
});
?>
<!DOCTYPE html>
<html lang="<?= lang_code() ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?php
    echo $meta ?? '';
    echo $schema ?? '';
    echo $append ?? '';
    ?>
    <?= \System\Libraries\Render::renderAsset('head', 'frontend') ?>
</head>

<body class="<?= $page_class ?>">

    <?php if (!is_page('home')): ?>
        <?php
        $current_page = get_current_page();
        // var_dump($current_page);
     
        if (is_page('apps')) {
            get_template('sections/top-nav/top-nav-app');
        } elseif (is_page('games')) {
            get_template('sections/top-nav/top-nav-game');
        } elseif ($current_page['is_single']) {
            get_template('sections/top-nav/top-nav-single');
        } else {
            get_template('sections/top-nav/top-nav-page');
        }
        ?>
    <?php endif; ?>

  
   



<!-- Header -->
    <header id="header">
        <nav class="container">
            <div style="display: grid; grid-template-rows: 64px; grid-template-columns: 100%; gap: 10px;">
                <div class="menu-container liquid-glass" style="padding-left: 20px; padding-right: 20px;">
                    <a href="/" class="clickable" aria-label="Home page">
                        <div class="menu-item" style="text-align: start;">
                            <span class="svg-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 56 56">
                                    <path fill-rule="evenodd" d="M32,0 C34.209139,0 36,1.790861 36,4 L36,40 C36,42.209139 34.209139,44 32,44 L4,44 C1.790861,44 0,42.209139 0,40 L0,4 C0,1.790861 1.790861,0 4,0 L32,0 Z M30,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,38 C4,39.1045695 4.8954305,40 6,40 L30,40 C31.1045695,40 32,39.1045695 32,38 L32,6 C32,4.8954305 31.1045695,4 30,4 Z M28,14 C29.1045695,14 30,14.8954305 30,16 L30,36 C30,37.1045695 29.1045695,38 28,38 L8,38 C6.8954305,38 6,37.1045695 6,36 L6,16 C6,14.8954305 6.8954305,14 8,14 L28,14 Z M16,6 C17.1045695,6 18,6.8954305 18,8 C18,9.1045695 17.1045695,10 16,10 L8,10 C6.8954305,10 6,9.1045695 6,8 C6,6.8954305 6.8954305,6 8,6 L16,6 Z" transform="translate(10 6)"></path>
                                </svg>
                            </span>
                            <span>Home</span>
                        </div>
                    </a>
                    <button class="clickable" id="search-open" type="button" aria-label="Search">
                        <div class="menu-item">
                            <span class="svg-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 56 56">
                                    <path d="M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"></path>
                                </svg>
                            </span>
                            <span>Search</span>
                        </div>
                    </button>
                    <a class="clickable" href="/games" aria-label="Games page">
                        <div class="menu-item">
                            <span class="svg-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 56 56">
                                    <path fill-rule="evenodd" d="M26,4.19774169 C32.1246521,4.15319844 40.5436115,-3.72780341 45.8036054,2.73567487 C51.0635992,9.19915314 53.0019674,26.086104 49.6166782,33.4829125 C48.4190056,36.09981 40.9112338,36.09981 36.2709234,26.5399879 L15.7290766,26.5399879 C11.0887662,36.09981 3.58099442,36.09981 2.38332183,33.4829125 C-1.00196739,26.086104 1.28965372,8.76507605 6.19639462,2.73567487 C11.1031355,-3.29372632 20.0255806,4.15429105 26,4.19774169 Z M15,12 L15,9.5 C15,8.67157288 14.3284271,8 13.5,8 C12.6715729,8 12,8.67157288 12,9.5 L12,12 L9.5,12 C8.67157288,12 8,12.6715729 8,13.5 C8,14.3284271 8.67157288,15 9.5,15 L12,15 L12,17.5 C12,18.3284271 12.6715729,19 13.5,19 C14.3284271,19 15,18.3284271 15,17.5 L15,15 L17.5,15 C18.3284271,15 19,14.3284271 19,13.5 C19,12.6715729 18.3284271,12 17.5,12 L15,12 Z M38,12 C39.1045695,12 40,11.1045695 40,10 C40,8.8954305 39.1045695,8 38,8 C36.8954305,8 36,8.8954305 36,10 C36,11.1045695 36.8954305,12 38,12 Z M42,16 C43.1045695,16 44,15.1045695 44,14 C44,12.8954305 43.1045695,12 42,12 C40.8954305,12 40,12.8954305 40,14 C40,15.1045695 40.8954305,16 42,16 Z M34,16 C35.1045695,16 36,15.1045695 36,14 C36,12.8954305 35.1045695,12 34,12 C32.8954305,12 32,12.8954305 32,14 C32,15.1045695 32.8954305,16 34,16 Z M38,20 C39.1045695,20 40,19.1045695 40,18 C40,16.8954305 39.1045695,16 38,16 C36.8954305,16 36,16.8954305 36,18 C36,19.1045695 36.8954305,20 38,20 Z" transform="translate(2 10)"></path>
                                </svg>
                            </span>
                            <span>Games</span>
                        </div>
                    </a>
                    <a class="clickable" href="/apps" aria-label="Apps page">
                        <div class="menu-item">
                            <span class="svg-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 56 56">
                                    <path fill-rule="evenodd" d="M39.2584969,29.5990283 L43.5130807,31.4030317 C43.7706189,31.5639931 43.988118,31.7814922 44.1490794,32.0390304 C44.7345001,32.9757035 44.4497537,34.2096042 43.5130807,34.7950249 L28.5866625,41.1240363 C24.6954191,42.5560634 19.7579314,42.5560634 15.866688,41.1240363 L0.940269829,34.7950249 C0.682731565,34.6340635 0.465232516,34.4165644 0.304271101,34.1590262 C-0.281149563,33.2223531 0.00359676691,31.9884524 0.940269829,31.4030317 L5.1948536,29.5990283 L15.866688,34.1240363 C19.7579314,35.5560634 24.6954191,35.5560634 28.5866625,34.1240363 L39.2584969,29.5990283 Z M39.2584969,17.5990283 L43.5130807,19.4030317 C43.7706189,19.5639931 43.988118,19.7814922 44.1490794,20.0390304 C44.7345001,20.9757035 44.4497537,22.2096042 43.5130807,22.7950249 L28.5866625,29.1240363 C24.6954191,30.5560634 19.7579314,30.5560634 15.866688,29.1240363 L0.940269829,22.7950249 C0.682731565,22.6340635 0.465232516,22.4165644 0.304271101,22.1590262 C-0.281149563,21.2223531 0.00359676691,19.9884524 0.940269829,19.4030317 L5.1948536,17.5990283 L15.866688,22.1240363 C19.7579314,23.5560634 24.6954191,23.5560634 28.5866625,22.1240363 L39.2584969,17.5990283 Z M28.5866625,1.07402035 L43.5130807,7.40303169 C43.7706189,7.56399311 43.988118,7.78149216 44.1490794,8.03903042 C44.7345001,8.97570348 44.4497537,10.2096042 43.5130807,10.7950249 L28.5866625,17.1240363 C24.6954191,18.5560634 19.7579314,18.5560634 15.866688,17.1240363 L0.940269829,10.7950249 C0.682731565,10.6340635 0.465232516,10.4165644 0.304271101,10.1590262 C-0.281149563,9.22235312 0.00359676691,7.98845236 0.940269829,7.40303169 L15.866688,1.07402035 C19.7579314,-0.358006784 24.6954191,-0.358006784 28.5866625,1.07402035 Z" transform="translate(5.773 6.901)"></path>
                                </svg>
                            </span>
                            <span>Apps</span>
                        </div>
                    </a>
                    <button class="clickable sidenav-trigger" type="button" data-target="nav-mobile" aria-label="Open Menu">
                        <div class="menu-item" style="text-align: end;">
                            <span class="svg-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 -960 960 960">
                                    <path d="M240-175.39q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm-480-240q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm-480-240q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Zm240 0q-26.65 0-45.63-18.98-18.98-18.98-18.98-45.63 0-26.65 18.98-45.63 18.98-18.98 45.63-18.98 26.65 0 45.63 18.98 18.98 18.98 18.98 45.63 0 26.65-18.98 45.63-18.98 18.98-45.63 18.98Z"></path>
                                </svg>
                            </span>
                            <span>Menu</span>
                        </div>
                    </button>
                </div>
            </div>
        </nav>
    </header>
    <div id="search-form"><button id="search-close" type="button" aria-label="Close Search"></button>
        <div class="search-form__content">
            <div class="container">
                <div id="search-results" class="liquid-glass"></div>
                <form role="search" method="get" action="/search/" class="liquid-glass"><button type="submit" aria-label="Search"><span class="svg-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 56 56">
                                <path d="M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"></path>
                            </svg></span> </button><input id="search-input" type="search" placeholder="Search..." name="s" minlength="2" maxlength="156" autocomplete="off" required=""></form>
            </div>
        </div>
    </div>
    <main id="primary" style="height: auto !important;">

