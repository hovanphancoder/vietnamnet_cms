function initTableOfContents() {
    const e = document.getElementById("toc-trigger"),
        t = document.getElementById("table-of-content");
    e && t && (generateTableOfContents(), e.addEventListener("click", function() {
        t.hasAttribute("open") ? (t.removeAttribute("open"), e.textContent = "Show Contents") : (t.setAttribute("open", ""), e.textContent = "Hide Contents")
    }))
}

function generateTableOfContents() {
    console.log("Starting TOC generation...");
    const e = document.getElementById("table-of-content");
    if (!e) return void console.log("TOC container not found");
    let t = document.querySelector(".entry-block.entry-content.main-entry-content");
    if (t || (t = document.querySelector(".entry-content")), t || (t = document.querySelector(".main-entry-content")), t || (t = document.querySelector(".entry-block")), !t) return void console.log("Content container not found");
    console.log("Found content container:", t.className);
    const n = t.querySelectorAll("h1, h2, h3, h4, h5, h6");
    if (console.log("Found headings:", n.length), 0 === n.length) return void console.log("No headings found in content");
    const o = e.querySelector("ul");
    if (!o) return void console.log("TOC list not found");
    o.innerHTML = "";
    let i = 0,
        c = [0, 0, 0, 0, 0, 0];
    n.forEach((e, t) => {
        if (e.closest(".recommended-section, .recommended-for-you, .related-posts")) return void console.log("Skipping heading in recommended section:", e.textContent);
        e.id || (e.id = `heading-${t}`);
        const n = document.createElement("li"),
            r = parseInt(e.tagName.charAt(1));
        c[r - 1]++;
        for (let e = r; e < 6; e++) c[e] = 0;
        let l = "";
        for (let e = 0; e < r; e++) c[e] > 0 && (l && (l += "."), l += c[e]);
        n.style.marginLeft = 20 * (r - 1) + "px";
        const d = document.createElement("a");
        d.href = `#${e.id}`, d.innerHTML = `<span class="toc-number">${l}.</span> ${e.textContent.trim()}`, d.setAttribute("aria-label", `Jump to ${e.textContent.trim()}`), d.addEventListener("click", function(t) {
            t.preventDefault();
            const n = e.getBoundingClientRect().top + window.pageYOffset - 50;
            window.scrollTo({
                top: n,
                behavior: "smooth"
            })
        }), n.appendChild(d), o.appendChild(n), i++, console.log("Added heading:", e.textContent.trim(), "Level:", r, "Number:", l)
    }), console.log("TOC generated with", i, "items")
}

function initTitlePostToTopNav() {
    const e = document.getElementById("title-post");
    if (e) {
        const t = document.querySelector(".top-nav__title");
        if (t) {
            let n = e.textContent || e.innerText;
            n = n.replace(/\s+MOD APK.*$/i, "").trim(), t.textContent = n
        }
    }
}
document.addEventListener("DOMContentLoaded", function() {
    initTableOfContents(), initTitlePostToTopNav()
});